<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-tutorials/mushroom-app">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Tutorial: Let&#x27;s build a mushroom app! | p2panda</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://p2panda.org/tutorials/mushroom-app"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Tutorial: Let&#x27;s build a mushroom app! | p2panda"><meta data-rh="true" name="description" content="In this tutorial we will build an web app for finding and identifying mushrooms using p2panda. We will build the application with React, Webpack and TypeScript."><meta data-rh="true" property="og:description" content="In this tutorial we will build an web app for finding and identifying mushrooms using p2panda. We will build the application with React, Webpack and TypeScript."><link data-rh="true" rel="icon" href="/images/deepsea-panda.svg"><link data-rh="true" rel="canonical" href="https://p2panda.org/tutorials/mushroom-app"><link data-rh="true" rel="alternate" href="https://p2panda.org/tutorials/mushroom-app" hreflang="en"><link data-rh="true" rel="alternate" href="https://p2panda.org/tutorials/mushroom-app" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.de076f58.css">
<link rel="preload" href="/assets/js/runtime~main.86ed3d3b.js" as="script">
<link rel="preload" href="/assets/js/main.125a03bc.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><div class="navbar__brand"><div class="navbar__logo"><img src="/images/p2panda-book.png" class="themedImage_ToTc themedImage--light_HNdA"><img src="/images/p2panda-book.png" class="themedImage_ToTc themedImage--dark_i4oU"></div></div></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/p2panda-book.png" alt="p2panda Handbook" class="themedImage_ToTc themedImage--light_HNdA"><img src="/images/p2panda-book.png" alt="p2panda Handbook" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/about/">About</a><a class="navbar__item navbar__link" href="/learn/">Learn</a><a class="navbar__item navbar__link" href="/tutorials/">Tutorials</a><a class="navbar__item navbar__link" href="/libraries/">Libraries</a><a class="navbar__item navbar__link" href="/specification/">Specification</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/faq">FAQ</a><a class="navbar__item navbar__link" href="/links">Links</a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Tutorial: Let&#x27;s build a mushroom app!</h1></header><p>In this tutorial we will build an web app for finding and identifying mushrooms using p2panda. We will build the application with <a href="https://reactjs.org/" target="_blank" rel="noopener noreferrer">React</a>, <a href="https://webpack.js.org/" target="_blank" rel="noopener noreferrer">Webpack</a> and <a href="https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer">TypeScript</a>.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><span class="panda-icon">üêß</span></span>This is not a React tutorial</div><div class="admonitionContent_S0QG"><p>This tutorial assumes that you already have experience in using npm, React, Webpack and TypeScript. We want to rather focus on <em>using</em> the JavaScript library <code>p2panda-js</code>. That being said, if you are a beginner, this is also for you as most of the code has already been written!</p></div></div><p>The idea of the application is inspired by <a href="https://plantnet.org" target="_blank" rel="noopener noreferrer">PlantNet</a>: Users can create entries of different mushrooms to create some sort of community-run encyclopaedia. If you&#x27;re around in the forest you can take a picture of a spotted mushroom, give it a GPS position and mark it with the mushroom database entry you <em>think</em> it might be. You can even select multiple mushrooms if you are not sure. The uploaded pictures of all users will show up in some sort of feed.</p><div class="image-frame_fg61"><div class="image-frame-inner_Xabn"><div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAMCAIAAADUCbv3AAAACXBIWXMAAAsTAAALEwEAmpwYAAABaElEQVQYlT2Ov0sCYQBA709obgwamhqCgghaWxIrUiGEknBsaKi2BqGgIYIabKwhGsIKKRDLIIVCSAjFNKW4O+/OO7/v7vt5l+dp0Q+aH+/xhEKrpdhYZEjk6KlWeX14lDCUbCxzVCOmUNS1pqnJUJWBWpfk6rsoGkoDqA2gSJYhlE2AXQrbGDpUMizZgMAhZptYbaLZWHixIOlQ1GEagblCMV+q6ByjDkMubTpYKFuQdW2NgMP43vFRPBicX46EoYOwx77tsgl4z1aRvh3bqD6nz08OFgI+ESjs0/nBFqAeN9s4FPBtrkdvL/ZXVyJvuvyPIfUYclkkvDQyPBr0+0KzcyoCpMv/1qjH4Acp1e4zN4l89vounTSohT3W/I1jj6EO2YnN7EYHUltjoamhBtJJ11ZtLFQsyLs2cumifyI83rc23e+fHGwxwHqO7hChYBgqxxJFmWzu7PLqNJFM3WZEYjY4rmPzCx4VIzF26HBJAAAAAElFTkSuQmCC&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="808" height="1000"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/mushroom-app.fdf2308.808.png" srcset="/assets/ideal-img/mushroom-app.fdf2308.808.png 808w" alt="This is how the app looks like" width="808" height="1000"></noscript></div></div><div class="image-frame-title_UNlE">This is how the app looks like</div></div><p>Of course this is a very simple mushrooming app and we can think of many cool features already now: Like users giving comments on your findings, rating them and even giving suggestions / votes which mushroom it can be - or you could show a world map of all mushroom findings with the help of the GPS positions. Or you can delete findings if they are wrong! All of this is possible with p2panda, you can hack on it if you want after reading this tutorial.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><span class="panda-icon">üêª‚Äç‚ùÑÔ∏è</span></span>Visual identification of mushrooms</div><div class="admonitionContent_S0QG"><p>All cool polar mushroom animals know that it is not always possible to identify mushrooms based on pictures. There are many other factors as well: The smell, the colour of the spores, the surroundings, time of the year, change of colour after rain and more! Sometimes you even need a microscope to see the spores - to really be sure.</p></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="what-do-i-need">What do I need?<a class="hash-link" href="#what-do-i-need" title="Direct link to heading">‚Äã</a></h2><ul><li>NodeJS</li><li>Rust</li><li>Editor</li><li>Terminal</li><li>Browser</li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><span class="panda-icon">üêº</span></span>Never worked with Rust before?</div><div class="admonitionContent_S0QG"><p>This tutorial requires you to have a working Rust environment. If you have never worked with Rust before this is no problem! Setting it up is fairly easy and besides using some basic command line commands there is no more Rust knowledge required to make <code>aquadoggo</code>, the p2panda node, run on your computer.</p></div></div><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>How do I install Rust?</summary><div><div class="collapsibleContent_i85q"><p>Make sure you have a working Rust environment installed on your computer before you begin with the tutorial. You can check this by running <code>rustc --version</code> in your terminal. This tutorial was written with Rust version <code>1.63.0</code> but it will probably also work with other versions.</p><p>If you don&#x27;t have Rust installed yet you can follow the steps on the official Rust website: <a href="https://www.rust-lang.org/tools/install" target="_blank" rel="noopener noreferrer">How to install Rust</a>.</p></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>How do I install NodeJS?</summary><div><div class="collapsibleContent_i85q"><p>You can check out the official <a href="https://nodejs.org/en/download/package-manager/" target="_blank" rel="noopener noreferrer">Installing Node.js via package manager</a> guidelines here. But we would recommend you installing a NodeJS version manager like <a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener noreferrer">nvm</a>, or even better <a href="https://github.com/tj/n" target="_blank" rel="noopener noreferrer">n</a>. We used the NodeJS version <code>18.8.0</code> for this tutorial.</p></div></div></details><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="start-node">Start node<a class="hash-link" href="#start-node" title="Direct link to heading">‚Äã</a></h2><p>Every p2panda client needs a node to talk to, so let&#x27;s start one! You can follow the <a href="/tutorials/aquadoggo">Set up a local node</a> to learn how to do this in detail, or just run the following steps here:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token comment" style="color:#66cccc"># Clone the `aquadoggo` git repository</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token function" style="color:#66cccc;font-weight:bold">git</span><span class="token plain"> clone https://github.com/p2panda/aquadoggo.git</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token comment" style="color:#66cccc"># Move into the folder you&#x27;ve just created</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token builtin class-name" style="color:#9ddab3">cd</span><span class="token plain"> aquadoggo</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token comment" style="color:#66cccc"># Compile and start the node with basic logging enabled</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token assign-left variable" style="color:#f2f0ec">RUST_LOG</span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain">aquadoggo</span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain">info </span><span class="token function" style="color:#66cccc;font-weight:bold">cargo</span><span class="token plain"> run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now you have a local node running on port <code>2020</code>. You can check if everything is alright by opening your browser and surfing to <a href="http://localhost:2020/graphql" target="_blank" rel="noopener noreferrer">http://localhost:2020/graphql</a>, do you see the GraphQL playground? Super. We will play with it soon!</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="download-the-application-code">Download the application code<a class="hash-link" href="#download-the-application-code" title="Direct link to heading">‚Äã</a></h2><p>Since this is not a tutorial about how to write a React web-application, we already prepared most of the source code for you. This is how you can set it up:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token comment" style="color:#66cccc"># Clone the `mushroom-app-tutorial` git repository</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token function" style="color:#66cccc;font-weight:bold">git</span><span class="token plain"> clone https://github.com/p2panda/mushroom-app-tutorial.git</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token comment" style="color:#66cccc"># Move into the folder you&#x27;ve just created</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token builtin class-name" style="color:#9ddab3">cd</span><span class="token plain"> mushroom-app-tutorial</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token comment" style="color:#66cccc"># Install NodeJS dependencies</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token function" style="color:#66cccc;font-weight:bold">npm</span><span class="token plain"> </span><span class="token function" style="color:#66cccc;font-weight:bold">install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Let&#x27;s stay in the <code>mushroom-app-tutorial</code> directory from now on, we will look into some code and run a script here.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="create-a-schema">Create a schema<a class="hash-link" href="#create-a-schema" title="Direct link to heading">‚Äã</a></h2><p>We already know what the mushroom app will be capable of, but we need to define as well how the data <em>will look like</em>. What sort of data do we want to publish, query and visualise in this application?</p><p>In p2panda we can create <em>schemas</em> which will help us to define the shape of the data we need. Nodes will register these schemas and start supporting them. As soon as a node supports a schema you can send that data to it and the node will give you a nice GraphQL API to query it in different ways.</p><p>For every p2panda application we want to build, we have to define the schemas first we want to use. It could be that there are many even, depending on how complex your program will become.</p><p>Usually we have to define the schemas only once, as soon as they are deployed on a real node they can be spread across the network: Other nodes will download it automatically when they think it&#x27;s a good idea to support your schema.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><span class="panda-icon">üêß</span></span>Nodes supporting schemas</div><div class="admonitionContent_S0QG"><p>Currently all nodes support all schemas automatically, later we will add features where you can <em>whitelist</em> schema ids you want to support. This means that nodes will opt-in into supporting different sorts of applications. Some nodes will only support playing chess, some others will only support your mushroom app - maybe there is a node supporting both and more!</p></div></div><p>During development we might want to create the schema multiple times, because we&#x27;re deleting the database of our node or we&#x27;ve made some changes to the schema. That&#x27;s okay!</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><span class="panda-icon">üêß</span></span>How do I delete my database?</div><div class="admonitionContent_S0QG"><p>Check out the <a href="/tutorials/aquadoggo">aquadoggo Tutorial</a> to find out.</p></div></div><p>Enough of all of this theory! How does the data now look like for our mushroom app?</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mushroom-schema"><code>mushroom</code> Schema<a class="hash-link" href="#mushroom-schema" title="Direct link to heading">‚Äã</a></h3><p>We want users to make <em>encyclopaedia</em> entries about all sorts of mushrooms, similar to a wiki. We keep it simple for now: The <code>mushroom</code> schema needs a <code>title</code>, a <code>description</code>, the <code>latin</code> name (because we are real mycologists) and an <code>edible</code> flag which indicates if we can eat this mushroom or if it is deadly poisonous.</p><ul><li><code>title</code>: String</li><li><code>description</code>: String</li><li><code>latin</code>: String</li><li><code>edible</code>: Boolean</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mushroom_finding-schema"><code>mushroom_finding</code> Schema<a class="hash-link" href="#mushroom_finding-schema" title="Direct link to heading">‚Äã</a></h3><p>Next to the <code>mushroom</code> entries we need the <code>mushroom_finding</code> feed of the users. They want to upload a picture (as <code>blob</code>), define a <code>lat</code> and <code>lon</code> GPS position and mark which <code>mushrooms</code> they think it could have been. The users can select one or many mushrooms by simply just referring to the encyclopaedia entries.</p><p>Relating to the mushroom entries is possible with a <em>relation list</em>. This is a special sort of field where we can refer to documents of the same or even another schema, simply by mentioning their identifiers.</p><p>Since p2panda doesn&#x27;t have any native support for binary data yet (like images or videos), we can make use of a simple trick: We encode the uploaded images as <a href="https://stackoverflow.com/questions/6150289/how-can-i-convert-an-image-into-base64-string-using-javascript" target="_blank" rel="noopener noreferrer">base64</a> and store the image as a string inside the <code>blob</code> field.</p><ul><li><code>blob</code>: String</li><li><code>lat</code>: Float</li><li><code>lon</code>: Float</li><li><code>mushrooms</code>: Relation List with <code>mushroom</code> documents</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="register-schemas">Register schemas<a class="hash-link" href="#register-schemas" title="Direct link to heading">‚Äã</a></h3><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><span class="panda-icon">üêº</span></span>How to create a schema?</div><div class="admonitionContent_S0QG"><p>There is another tutorial showing you <a href="/tutorials/send-to-node">how you can create schemas</a> with the command line tool <code>send-to-node</code>. For this tutorial this is not necessary, but if you are wondering what is going on, you should check this out first!</p></div></div><p>We could create these schemas now manually by sending operations to our node, but we already have that prepared for you. Just run the following command inside the <code>mushroom-app-tutorial</code> directory:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token comment" style="color:#66cccc"># Create schemas and send them to node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token function" style="color:#66cccc;font-weight:bold">npm</span><span class="token plain"> run schema</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will create the two schemas <code>mushroom</code> and <code>mushroom_finding</code> and register them on your locally running node. You can go to <a href="http://localhost:2020/graphql" target="_blank" rel="noopener noreferrer">http://localhost:2020/graphql</a> to check out the GraphQL playground, there you can now see the newly created schemas in the <em>Docs</em> tab on the right side!</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><span class="panda-icon">üêª‚Äç‚ùÑÔ∏è</span></span>Huh, I don&#x27;t see anything?</div><div class="admonitionContent_S0QG"><p>Oh, maybe you should refresh the page then (the playground&#x27;s auto-refresh can be turned on / off).</p></div></div><p>You can see that the script gave us some instructions on what to do next:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">Next step: Create a file `./schemas.json` and paste this into it:</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">{</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  &quot;MUSHROOM_SCHEMA_ID&quot;: &quot;mushroom_0020c3accb0b0c8822ecc0309190e23de5f7f6c82f660ce08023a1d74e055a3d7c4d&quot;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  &quot;FINDINGS_SCHEMA_ID&quot;: &quot;mushroom_finding_0020aaabb3edecb2e8b491b0c0cb6d7d175e4db0e9da6003b93de354feb9c52891d0&quot;</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Your schema ids will look a little bit different since every generated schema is unique! Let&#x27;s do what the program says and create a <code>schemas.json</code> file where we copy this JSON inside. This will tell the program what schemas to look for when doing the GraphQL queries.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="build-the-application">Build the application<a class="hash-link" href="#build-the-application" title="Direct link to heading">‚Äã</a></h2><p>Designing and creating a schema is a very large part of building an p2panda application. The other part is implementing the interface! Suddenly we&#x27;re back at <em>normal</em> web development: Spending long time figuring out how to set up TypeScript, Webpack, some linters like eslint and prettier etc., building React components and views integrating a router and so on. If you are a web developer then this part will be very familiar to you, so let&#x27;s focus rather on the parts which make it a <em>special</em> p2panda application.</p><p>To build something with p2panda in TypeScript or JavaScript we can use the package <a href="https://www.npmjs.com/package/p2panda-js" target="_blank" rel="noopener noreferrer"><code>p2panda-js</code></a>. With it we can do the most important things: 1. Initialise the WebAssembly code 2. Generate a key pair 3. Create p2panda operations and entries 4. Send them to a node 5. Query documents from a node to display them in the app.</p><p>Let&#x27;s go through them step by step!</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="initialise-webassembly">Initialise WebAssembly<a class="hash-link" href="#initialise-webassembly" title="Direct link to heading">‚Äã</a></h3><p><code>p2panda-js</code> is actually mainly developed in Rust and compiled as WebAssembly with a thin TypeScript wrapper around it to make it <em>feel</em> more like a regular TypeScript package. Using WebAssembly is a little bit special and requires you to initialise it before you can use it.</p><p>In <code>p2panda-js</code> we can simply do this like that:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token keyword" style="color:#ffcc66">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"> initWebAssembly </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">from</span><span class="token plain"> </span><span class="token string" style="color:#cc99cc">&#x27;p2panda-js&#x27;</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">await</span><span class="token plain"> </span><span class="token function" style="color:#66cccc;font-weight:bold">initWebAssembly</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><span class="panda-icon">üêª‚Äç‚ùÑÔ∏è</span></span>Where is the WebAssembly code?</div><div class="admonitionContent_S0QG"><p>Good question! We are encoding the WebAssembly code as a base64 string <em>inside</em> the JavaScript files. This is why it just works like that. If you want to manually load the <code>.wasm</code> file we have you covered as well, just check out the <a href="https://github.com/p2panda/p2panda/blob/main/p2panda-js/README.md" target="_blank" rel="noopener noreferrer"><code>README.md</code></a> of the package.</p></div></div><p>You might already see the problem here though: The <code>initWebAssembly</code> function is async! This means that we have to <em>wait</em> until we can do anything else, like generating a key pair for the user or sending our first operation to the node.</p><p>Luckily React can help us with some convenient patterns, let&#x27;s look at the <a href="https://github.com/p2panda/mushroom-app-tutorial/blob/main/src/components/InitWasm.tsx" target="_blank" rel="noopener noreferrer"><code>src/components/InitWasm.tsx</code></a> file to see how we did it in the mushroom app:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token keyword" style="color:#ffcc66">import</span><span class="token plain"> React</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"> useEffect</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"> useState </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">from</span><span class="token plain"> </span><span class="token string" style="color:#cc99cc">&#x27;react&#x27;</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"> initWebAssembly </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">from</span><span class="token plain"> </span><span class="token string" style="color:#cc99cc">&#x27;p2panda-js&#x27;</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">type</span><span class="token plain"> </span><span class="token class-name" style="color:#9ddab3">Props</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  children</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token constant" style="color:#6699cc">JSX</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token plain">Element</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">export</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> InitWasm</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> React</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token constant" style="color:#6699cc">FC</span><span class="token operator" style="color:#f2f0ec">&lt;</span><span class="token plain">Props</span><span class="token operator" style="color:#f2f0ec">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"> children </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">[</span><span class="token plain">ready</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"> setReady</span><span class="token punctuation" style="color:#f2f0ec">]</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token function" style="color:#66cccc;font-weight:bold">useState</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token boolean">false</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token function" style="color:#66cccc;font-weight:bold">useEffect</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#66cccc;font-weight:bold">init</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">      </span><span class="token keyword" style="color:#ffcc66">await</span><span class="token plain"> </span><span class="token function" style="color:#66cccc;font-weight:bold">initWebAssembly</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">      </span><span class="token function" style="color:#66cccc;font-weight:bold">setReady</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token function" style="color:#66cccc;font-weight:bold">init</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">[</span><span class="token punctuation" style="color:#f2f0ec">]</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">return</span><span class="token plain"> ready </span><span class="token operator" style="color:#f2f0ec">?</span><span class="token plain"> children </span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">null</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>InitWasm</code> component will load all <code>children</code> components as soon as everything got initialised. If you are concerned about loading times (it should be less than a couple of milliseconds) then you can even add a small spinner here.</p><p>We wrap the whole application component <code>App</code> around <code>InitWasm</code> and make sure nothing gets executed before we are ready:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> Root</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> React</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token function-variable function" style="color:#66cccc;font-weight:bold">FC</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token operator" style="color:#f2f0ec">&lt;</span><span class="token plain">InitWasm</span><span class="token operator" style="color:#f2f0ec">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">      </span><span class="token operator" style="color:#f2f0ec">&lt;</span><span class="token plain">App </span><span class="token operator" style="color:#f2f0ec">/</span><span class="token operator" style="color:#f2f0ec">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token operator" style="color:#f2f0ec">&lt;</span><span class="token operator" style="color:#f2f0ec">/</span><span class="token plain">InitWasm</span><span class="token operator" style="color:#f2f0ec">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="generate-key-pair">Generate key pair<a class="hash-link" href="#generate-key-pair" title="Direct link to heading">‚Äã</a></h3><p>Right after we initialised the WebAssembly we want to make sure that the user gets a key pair. This is required to give the user some sort of identity but also to sign the data the user want&#x27;s to create.</p><p>It is quite easy to generate a new key pair with <code>p2panda-js</code>:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token keyword" style="color:#ffcc66">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"> KeyPair </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">from</span><span class="token plain"> </span><span class="token string" style="color:#cc99cc">&#x27;p2panda-js&#x27;</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> keyPair </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">new</span><span class="token plain"> </span><span class="token class-name" style="color:#9ddab3">KeyPair</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>But we do not always want to generate a <em>new</em> key pair every time the user comes back to the website! We should persist the private key using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage" target="_blank" rel="noopener noreferrer"><code>Window.LocalStorage</code></a> API:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token keyword" style="color:#ffcc66">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"> KeyPair </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">from</span><span class="token plain"> </span><span class="token string" style="color:#cc99cc">&#x27;p2panda-js&#x27;</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> </span><span class="token constant" style="color:#6699cc">LOCAL_STORAGE_KEY</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token string" style="color:#cc99cc">&#x27;privateKey&#x27;</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">function</span><span class="token plain"> </span><span class="token function" style="color:#66cccc;font-weight:bold">getKeyPair</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> KeyPair </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token comment" style="color:#66cccc">// Check if a private key already exists and derive key pair from it if yes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> privateKey </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> window</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token plain">localStorage</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token function" style="color:#66cccc;font-weight:bold">getItem</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token constant" style="color:#6699cc">LOCAL_STORAGE_KEY</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token plain">privateKey</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc66">return</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">new</span><span class="token plain"> </span><span class="token class-name" style="color:#9ddab3">KeyPair</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token plain">privateKey</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token comment" style="color:#66cccc">// Generate a new key pair otherwise and persist it in localStorage</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> keyPair </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">new</span><span class="token plain"> </span><span class="token class-name" style="color:#9ddab3">KeyPair</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  window</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token plain">localStorage</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token function" style="color:#66cccc;font-weight:bold">setItem</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token constant" style="color:#6699cc">LOCAL_STORAGE_KEY</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"> keyPair</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token function" style="color:#66cccc;font-weight:bold">privateKey</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">return</span><span class="token plain"> keyPair</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now we can just call <code>getKeyPair</code> and we will either receive a new key pair when doing it for the first time or the old one if we&#x27;re coming back.</p><p>But how do we now share this information across the whole React application? As a React developer you might know some patterns probably: Prop drilling, Redux, Contexts .. there are many options and it is basically up to you! In the mushroom app we&#x27;ve decided to use the <a href="https://reactjs.org/docs/context.html" target="_blank" rel="noopener noreferrer">Context</a> pattern which gets especially interesting if we have many components. Let&#x27;s have a look at the <a href="https://github.com/p2panda/mushroom-app-tutorial/blob/main/src/KeyPairContext.tsx" target="_blank" rel="noopener noreferrer"><code>src/KeyPairContext.tsx</code></a> file:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token keyword" style="color:#ffcc66">import</span><span class="token plain"> React</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"> useMemo </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">from</span><span class="token plain"> </span><span class="token string" style="color:#cc99cc">&#x27;react&#x27;</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">type</span><span class="token plain"> </span><span class="token class-name" style="color:#9ddab3">Context</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  publicKey</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">string</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">|</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">null</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  keyPair</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> KeyPair </span><span class="token operator" style="color:#f2f0ec">|</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">null</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">export</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> KeyPairContext </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> React</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token generic-function function" style="color:#66cccc;font-weight:bold">createContext</span><span class="token generic-function generic class-name operator" style="color:#f2f0ec">&lt;</span><span class="token generic-function generic class-name" style="color:#9ddab3">Context</span><span class="token generic-function generic class-name operator" style="color:#f2f0ec">&gt;</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  publicKey</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">null</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  keyPair</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">null</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">type</span><span class="token plain"> </span><span class="token class-name" style="color:#9ddab3">Props</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  children</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token constant" style="color:#6699cc">JSX</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token plain">Element</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">export</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> KeyPairProvider</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> React</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token constant" style="color:#6699cc">FC</span><span class="token operator" style="color:#f2f0ec">&lt;</span><span class="token plain">Props</span><span class="token operator" style="color:#f2f0ec">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"> children </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> state </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token function" style="color:#66cccc;font-weight:bold">useMemo</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> keyPair </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token function" style="color:#66cccc;font-weight:bold">getKeyPair</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc66">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">      keyPair</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">      publicKey</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> keyPair</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token function" style="color:#66cccc;font-weight:bold">publicKey</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">[</span><span class="token punctuation" style="color:#f2f0ec">]</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token operator" style="color:#f2f0ec">&lt;</span><span class="token plain">KeyPairContext</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token plain">Provider value</span><span class="token operator" style="color:#f2f0ec">=</span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain">state</span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token operator" style="color:#f2f0ec">&gt;</span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain">children</span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token operator" style="color:#f2f0ec">&lt;</span><span class="token operator" style="color:#f2f0ec">/</span><span class="token plain">KeyPairContext</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token plain">Provider</span><span class="token operator" style="color:#f2f0ec">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>KeyPairProvider</code> helps us to establish the state of the <code>KeyPairContext</code> by calling <code>getKeyPair</code>. From that point on we populated the state with either our new or old key pair and can consume it by using <code>KeyPairContext.Consumer</code> in other components like that:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token operator" style="color:#f2f0ec">&lt;</span><span class="token plain">KeyPairContext</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token plain">Consumer</span><span class="token operator" style="color:#f2f0ec">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"> publicKey </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token keyword" style="color:#ffcc66">return</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">&lt;</span><span class="token plain">p</span><span class="token operator" style="color:#f2f0ec">&gt;</span><span class="token plain">Hello</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain">publicKey</span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token operator" style="color:#f2f0ec">!</span><span class="token operator" style="color:#f2f0ec">&lt;</span><span class="token operator" style="color:#f2f0ec">/</span><span class="token plain">p</span><span class="token operator" style="color:#f2f0ec">&gt;</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token operator" style="color:#f2f0ec">&lt;</span><span class="token operator" style="color:#f2f0ec">/</span><span class="token plain">KeyPairContext</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token plain">Consumer</span><span class="token operator" style="color:#f2f0ec">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you need the <code>keyPair</code> already before, you can import the <code>useContext</code> hook and access all values like that:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token keyword" style="color:#ffcc66">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"> useContext </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">from</span><span class="token plain"> </span><span class="token string" style="color:#cc99cc">&#x27;react&#x27;</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"> keyPair </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token function" style="color:#66cccc;font-weight:bold">useContext</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token plain">KeyPairContext</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Really handy!</p><p>We have to make sure to establish the <code>KeyPairProvider</code> in the application as well, we&#x27;re doing this right at the beginning, next to <code>InitWasm</code>:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> Root</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> React</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token function-variable function" style="color:#66cccc;font-weight:bold">FC</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token operator" style="color:#f2f0ec">&lt;</span><span class="token plain">InitWasm</span><span class="token operator" style="color:#f2f0ec">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">      </span><span class="token operator" style="color:#f2f0ec">&lt;</span><span class="token plain">KeyPairProvider</span><span class="token operator" style="color:#f2f0ec">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">        </span><span class="token operator" style="color:#f2f0ec">&lt;</span><span class="token plain">App </span><span class="token operator" style="color:#f2f0ec">/</span><span class="token operator" style="color:#f2f0ec">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">      </span><span class="token operator" style="color:#f2f0ec">&lt;</span><span class="token operator" style="color:#f2f0ec">/</span><span class="token plain">KeyPairProvider</span><span class="token operator" style="color:#f2f0ec">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token operator" style="color:#f2f0ec">&lt;</span><span class="token operator" style="color:#f2f0ec">/</span><span class="token plain">InitWasm</span><span class="token operator" style="color:#f2f0ec">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="create-operations-and-entries">Create operations and entries<a class="hash-link" href="#create-operations-and-entries" title="Direct link to heading">‚Äã</a></h3><p>Operations and entries are the building blocks of p2panda, they <em>define</em> the contents of everything else: Schemas, Documents, and so on.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><span class="panda-icon">üêº</span></span>Entries and operations?</div><div class="admonitionContent_S0QG"><p>If you haven&#x27;t heard about them yet, you can read the <em>learn</em> sections on <a href="/learn/entries">Entries</a> and <a href="/learn/operations">Operations</a>.</p></div></div><p>With <code>p2panda-js</code> we can create operations like that:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token keyword" style="color:#ffcc66">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"> KeyPair</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"> signAndEncodeEntry</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"> encodeOperation </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">from</span><span class="token plain"> </span><span class="token string" style="color:#cc99cc">&#x27;p2panda-js&#x27;</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> keyPair </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">new</span><span class="token plain"> </span><span class="token class-name" style="color:#9ddab3">KeyPair</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> operation </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token function" style="color:#66cccc;font-weight:bold">encodeOperation</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  action</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token string" style="color:#cc99cc">&#x27;create&#x27;</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  schemaId</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token constant" style="color:#6699cc">MUSHROOM_SCHEMA_ID</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  fields</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    title</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token string" style="color:#cc99cc">&#x27;Mario Mushroom&#x27;</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    latin</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token string" style="color:#cc99cc">&#x27;Marius Fungus&#x27;</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    edible</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    description</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token string" style="color:#cc99cc">&#x27;It makes you grow&#x27;</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> entry </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token function" style="color:#66cccc;font-weight:bold">signAndEncodeEntry</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  operation</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"> keyPair</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Yes! We&#x27;re creating our first <code>mushroom</code> document here!</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><span class="panda-icon">üêª‚Äç‚ùÑÔ∏è</span></span>Playing in NodeJS</div><div class="admonitionContent_S0QG"><p><code>p2panda-js</code> also runs in NodeJS and there you don&#x27;t even need to initialise the WebAssembly! It is fun to play with the API in the interactive NodeJS environment. Just type <code>node</code> inside the the <code>mushroom-app-tutorial</code> folder, type <code>const p2panda = require(&#x27;p2panda-js&#x27;)</code>, hit <code>Enter</code>, and then you can directly get started, for example by writing <code>const keyPair = new p2panda.KeyPair()</code>! It is fun to create some operations, encode, decode and inspect them directly.</p></div></div><p>In the example above we are already using the schema id we&#x27;ve created before. Usually you want to keep the schema id in some central place, like in <a href="https://github.com/p2panda/mushroom-app-tutorial/blob/main/src/constants.ts" target="_blank" rel="noopener noreferrer"><code>src/constants.ts</code></a>. Especially after you officially released your p2panda application it will stay hard-coded like that since schema ids <em>never</em> change, except of when you migrate to a new schema version of course (but then you also very likely will update your application).</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><span class="panda-icon">üêß</span></span>Schema migrations</div><div class="admonitionContent_S0QG"><p>Updating a schema after releasing an application will not break it! Schema ids are <em>immutable</em> identifiers of the schema for exactly <em>that</em> version of it. If you introduce a new version, old applications will still point at the previous schema id and the new ones can already support the latest schema.</p><p>In the future we want to offer <a href="https://www.inkandswitch.com/cambria/" target="_blank" rel="noopener noreferrer">Lenses</a> to automatically support old and new schemas, especially in a p2p system this gets very important after a while.</p></div></div><p>To sign and encode a new entry we usually need to know what the sequence number, log id, backlink- and skiplink hash is. This information we get from our node and we can ask about it by doing a <code>nextArgs</code> GraphQL query!</p><p>Let&#x27;s set up a GraphQL client first:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token keyword" style="color:#ffcc66">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"> GraphQLClient</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"> gql </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">from</span><span class="token plain"> </span><span class="token string" style="color:#cc99cc">&#x27;graphql-request&#x27;</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> client </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">new</span><span class="token plain"> </span><span class="token class-name" style="color:#9ddab3">GraphQLClient</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token string" style="color:#cc99cc">&#x27;http://localhost:2020/graphql&#x27;</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><span class="panda-icon">üêª‚Äç‚ùÑÔ∏è</span></span>GraphQL libraries</div><div class="admonitionContent_S0QG"><p>In this tutorial we&#x27;re using <a href="https://www.npmjs.com/package/graphql-request" target="_blank" rel="noopener noreferrer"><code>graphql-request</code></a> as a GraphQL client. We like this one because it is very simple and lightweight, but there are many others as well, for example <a href="https://www.apollographql.com/" target="_blank" rel="noopener noreferrer">Apollo</a>.</p></div></div><p>Now we can make the <code>nextArgs</code> query to receive the required arguments:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token keyword" style="color:#ffcc66">type</span><span class="token plain"> </span><span class="token class-name" style="color:#9ddab3">NextArgs</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  logId</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">string</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  seqNum</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">string</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  backlink</span><span class="token operator" style="color:#f2f0ec">?</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">string</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  skiplink</span><span class="token operator" style="color:#f2f0ec">?</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">string</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">async</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">function</span><span class="token plain"> </span><span class="token function" style="color:#66cccc;font-weight:bold">nextArgs</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token plain">publicKey</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">string</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"> viewId</span><span class="token operator" style="color:#f2f0ec">?</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">string</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">Promise</span><span class="token operator" style="color:#f2f0ec">&lt;</span><span class="token plain">NextArgs</span><span class="token operator" style="color:#f2f0ec">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> query </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> gql</span><span class="token template-string template-punctuation string" style="color:#cc99cc">`</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">    </span><span class="token template-string graphql language-graphql keyword" style="color:#ffcc66">query</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql definition-query function" style="color:#66cccc;font-weight:bold">NextArgs</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">(</span><span class="token template-string graphql language-graphql variable" style="color:#f2f0ec">$publicKey</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">:</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql scalar">String</span><span class="token template-string graphql language-graphql operator" style="color:#f2f0ec">!</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">,</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql variable" style="color:#f2f0ec">$viewId</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">:</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql scalar">String</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">)</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">{</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql property-query">nextArgs</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">(</span><span class="token template-string graphql language-graphql attr-name" style="color:#f2f0ec">publicKey</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">:</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql variable" style="color:#f2f0ec">$publicKey</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">,</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql attr-name" style="color:#f2f0ec">viewId</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">:</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql variable" style="color:#f2f0ec">$viewId</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">)</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">{</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql property">logId</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql property">seqNum</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql property">backlink</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql property">skiplink</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">}</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">    </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">}</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">  </span><span class="token template-string template-punctuation string" style="color:#cc99cc">`</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> result </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token function" style="color:#66cccc;font-weight:bold">request</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token plain">query</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    publicKey</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    viewId</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">return</span><span class="token plain"> result</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token plain">nextArgs</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><span class="panda-icon">üêß</span></span><mdxadmonitiontitle>Why is <code>seqNum</code> and <code>logId</code> a string?</mdxadmonitiontitle></div><div class="admonitionContent_S0QG"><p>p2panda supports <code>u64</code> integers for sequence numbers and log id but JavaScript only supports up to <a href="https://262.ecma-international.org/6.0/#sec-number.max_safe_integer" target="_blank" rel="noopener noreferrer">53bit</a> to encode numbers. There is <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt/BigInt" target="_blank" rel="noopener noreferrer"><code>BigInt</code></a> as well but we can&#x27;t use it inside of JSON (which is the format of the GraphQL response). This is why we represent numbers in JavaScript as strings! They can be of any size then and latest when they arrive in the WebAssembly code they will be checked and correctly converted into <code>u64</code>.</p></div></div><p>Whenever we create a new <code>mushroom</code> or <code>mushroom_finding</code> document we just have to pass in the <code>publicKey</code> to the <code>nextArgs</code> method to receive everything we need. With all of this and our key pair we can now encode the operation and finally sign the entry:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token keyword" style="color:#ffcc66">type</span><span class="token plain"> </span><span class="token class-name" style="color:#9ddab3">Mushroom</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  title</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">string</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  description</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">string</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  latin</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">string</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  edible</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">boolean</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">async</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">function</span><span class="token plain"> </span><span class="token function" style="color:#66cccc;font-weight:bold">createMushroom</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  keyPair</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> KeyPair</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  values</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> Mushroom</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">Promise</span><span class="token operator" style="color:#f2f0ec">&lt;</span><span class="token keyword" style="color:#ffcc66">void</span><span class="token operator" style="color:#f2f0ec">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> args </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">await</span><span class="token plain"> </span><span class="token function" style="color:#66cccc;font-weight:bold">nextArgs</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token plain">keyPair</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token function" style="color:#66cccc;font-weight:bold">publicKey</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> operation </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token function" style="color:#66cccc;font-weight:bold">encodeOperation</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    schemaId</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token constant" style="color:#6699cc">MUSHROOM_SCHEMA_ID</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    fields</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">      </span><span class="token operator" style="color:#f2f0ec">...</span><span class="token plain">values</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> entry </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token function" style="color:#66cccc;font-weight:bold">signAndEncodeEntry</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">      </span><span class="token operator" style="color:#f2f0ec">...</span><span class="token plain">args</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">      payload</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> operation</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    keyPair</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">await</span><span class="token plain"> </span><span class="token function" style="color:#66cccc;font-weight:bold">publish</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token plain">entry</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"> operation</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="publish-data">Publish data<a class="hash-link" href="#publish-data" title="Direct link to heading">‚Äã</a></h3><p>To send the entry and operation now to the node we make use of the <code>publish</code> GraphQL mutation:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token keyword" style="color:#ffcc66">export</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">async</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">function</span><span class="token plain"> </span><span class="token function" style="color:#66cccc;font-weight:bold">publish</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  entry</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">string</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  operation</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">string</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">Promise</span><span class="token operator" style="color:#f2f0ec">&lt;</span><span class="token plain">NextArgs</span><span class="token operator" style="color:#f2f0ec">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> query </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> gql</span><span class="token template-string template-punctuation string" style="color:#cc99cc">`</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">    </span><span class="token template-string graphql language-graphql keyword" style="color:#ffcc66">mutation</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql definition-mutation function" style="color:#66cccc;font-weight:bold">Publish</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">(</span><span class="token template-string graphql language-graphql variable variable-input" style="color:#f2f0ec">$entry</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">:</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql scalar">String</span><span class="token template-string graphql language-graphql operator" style="color:#f2f0ec">!</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">,</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql variable variable-input" style="color:#f2f0ec">$operation</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">:</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql scalar">String</span><span class="token template-string graphql language-graphql operator" style="color:#f2f0ec">!</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">)</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">{</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql property-query property-mutation">publish</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">(</span><span class="token template-string graphql language-graphql attr-name" style="color:#f2f0ec">entry</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">:</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql variable variable-input" style="color:#f2f0ec">$entry</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">,</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql attr-name" style="color:#f2f0ec">operation</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">:</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql variable variable-input" style="color:#f2f0ec">$operation</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">)</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">{</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql property">logId</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql property">seqNum</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql property">backlink</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql property">skiplink</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">}</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">    </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">}</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">  </span><span class="token template-string template-punctuation string" style="color:#cc99cc">`</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> result </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token function" style="color:#66cccc;font-weight:bold">request</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token plain">query</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    entry</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    operation</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">return</span><span class="token plain"> result</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token plain">publish</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is it! We can now create <code>mushroom</code> documents.</p><p>If we&#x27;re updating or deleting a document we need to specify <em>what</em> document we want to apply these changes on. This we do by passing in the <code>viewId</code>. The <code>viewId</code> you can get from the GraphQL API, whenever you query for the documents you want to update or delete.</p><p>All of this you find in the <a href="https://github.com/p2panda/mushroom-app-tutorial/blob/main/src/requests.ts" target="_blank" rel="noopener noreferrer"><code>src/requests.ts</code></a> file, there you will find other queries as well, for example to create <code>mushroom_finding</code> documents.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="query-documents">Query documents<a class="hash-link" href="#query-documents" title="Direct link to heading">‚Äã</a></h3><p>After creating the <code>mushroom</code> documents we want to query them as well. We can do this like that:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token keyword" style="color:#ffcc66">type</span><span class="token plain"> </span><span class="token class-name" style="color:#9ddab3">Meta</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  viewId</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">string</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  documentId</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">string</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">type</span><span class="token plain"> </span><span class="token class-name" style="color:#9ddab3">Mushroom</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  description</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">string</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  edible</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">boolean</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  latin</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">string</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  title</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">string</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">type</span><span class="token plain"> </span><span class="token class-name" style="color:#9ddab3">MushroomResponse</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  meta</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> Meta</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  fields</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> Mushroom</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">async</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">function</span><span class="token plain"> </span><span class="token function" style="color:#66cccc;font-weight:bold">getAllMushrooms</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">Promise</span><span class="token operator" style="color:#f2f0ec">&lt;</span><span class="token plain">MushroomResponse</span><span class="token punctuation" style="color:#f2f0ec">[</span><span class="token punctuation" style="color:#f2f0ec">]</span><span class="token operator" style="color:#f2f0ec">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> query </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> gql</span><span class="token template-string template-punctuation string" style="color:#cc99cc">`</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">{</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">    </span><span class="token template-string graphql language-graphql attr-name" style="color:#f2f0ec">mushrooms</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">:</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql object">all_</span><span class="token template-string graphql language-graphql object interpolation interpolation-punctuation punctuation" style="color:#f2f0ec">${</span><span class="token template-string graphql language-graphql object interpolation constant" style="color:#6699cc">MUSHROOM_SCHEMA_ID</span><span class="token template-string graphql language-graphql object interpolation interpolation-punctuation punctuation" style="color:#f2f0ec">}</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">{</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql object">documents</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">{</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql object">meta</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">{</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">          </span><span class="token template-string graphql language-graphql property">documentId</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">          </span><span class="token template-string graphql language-graphql property">viewId</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">}</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql object">fields</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">{</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">          </span><span class="token template-string graphql language-graphql property">description</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">          </span><span class="token template-string graphql language-graphql property">edible</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">          </span><span class="token template-string graphql language-graphql property">latin</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">          </span><span class="token template-string graphql language-graphql property">title</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">}</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">}</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">    </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">}</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">  </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">}</span><span class="token template-string template-punctuation string" style="color:#cc99cc">`</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"> mushrooms </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token function" style="color:#66cccc;font-weight:bold">request</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token plain">query</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">return</span><span class="token plain"> mushrooms</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you prepend the schema id in the query with <code>all_</code> you receive a collection of <em>all</em> <code>mushroom</code> documents.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><span class="panda-icon">üêº</span></span>Pagination, filters and sorting</div><div class="admonitionContent_S0QG"><p>The <a href="https://p2panda.org/specification/APIs/queries" target="_blank" rel="noopener noreferrer">specification</a> already mentions pagination, filters and sorting but we have not implemented it yet, it will come soon!</p></div></div><p>See how we can also get some <code>meta</code> fields from the regarding mushroom documents? We can get the <code>documentId</code> and <code>viewId</code> for each entry, this helps us to update or delete the data as mentioned earlier.</p><p>If you want to only load one mushroom you can write something like this:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token keyword" style="color:#ffcc66">async</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">function</span><span class="token plain"> </span><span class="token function" style="color:#66cccc;font-weight:bold">getMushroom</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  documentId</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">string</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token operator" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6699cc">Promise</span><span class="token operator" style="color:#f2f0ec">&lt;</span><span class="token plain">MushroomResponse</span><span class="token operator" style="color:#f2f0ec">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> query </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> gql</span><span class="token template-string template-punctuation string" style="color:#cc99cc">`</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">{</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">    </span><span class="token template-string graphql language-graphql attr-name" style="color:#f2f0ec">mushroom</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">:</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql class-name interpolation interpolation-punctuation punctuation" style="color:#f2f0ec">${</span><span class="token template-string graphql language-graphql class-name interpolation constant" style="color:#6699cc">MUSHROOM_SCHEMA_ID</span><span class="token template-string graphql language-graphql class-name interpolation interpolation-punctuation punctuation" style="color:#f2f0ec">}</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">(</span><span class="token template-string graphql language-graphql attr-name" style="color:#f2f0ec">id</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">:</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql string" style="color:#cc99cc">&quot;</span><span class="token template-string graphql language-graphql string interpolation interpolation-punctuation punctuation" style="color:#f2f0ec">${</span><span class="token template-string graphql language-graphql string interpolation" style="color:#cc99cc">documentId</span><span class="token template-string graphql language-graphql string interpolation interpolation-punctuation punctuation" style="color:#f2f0ec">}</span><span class="token template-string graphql language-graphql string" style="color:#cc99cc">&quot;</span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">)</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">{</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql object">documents</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">{</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql object">meta</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">{</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">          </span><span class="token template-string graphql language-graphql property">documentId</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">          </span><span class="token template-string graphql language-graphql property">viewId</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">}</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql object">fields</span><span class="token template-string graphql language-graphql"> </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">{</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">          </span><span class="token template-string graphql language-graphql property">description</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">          </span><span class="token template-string graphql language-graphql property">edible</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">          </span><span class="token template-string graphql language-graphql property">latin</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">          </span><span class="token template-string graphql language-graphql property">title</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">        </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">}</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">      </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">}</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">    </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">}</span><span class="token template-string graphql language-graphql"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token template-string graphql language-graphql">  </span><span class="token template-string graphql language-graphql punctuation" style="color:#f2f0ec">}</span><span class="token template-string template-punctuation string" style="color:#cc99cc">`</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"> mushroom </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token plain"> </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token keyword" style="color:#ffcc66">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token function" style="color:#66cccc;font-weight:bold">request</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token plain">query</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token keyword" style="color:#ffcc66">return</span><span class="token plain"> mushroom</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now we talked almost about everything you need to build an p2panda application with React. You can dive a little bit more inside of the source code to see some details, but we should have covered the most important parts concerning p2panda!</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="run-the-application">Run the application<a class="hash-link" href="#run-the-application" title="Direct link to heading">‚Äã</a></h2><p>Finally, let&#x27;s use the mushroom app now!</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token function" style="color:#66cccc;font-weight:bold">npm</span><span class="token plain"> start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will run the web application under <a href="http://localhost:8080" target="_blank" rel="noopener noreferrer">http://localhost:8080</a>. You can open it in your browser and start playing with it. If you&#x27;re curious you can also check the GraphQL playground of the <code>aquadoggo</code> and make some queries there to compare!</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><span class="panda-icon">üêº</span></span>High-Level frameworks</div><div class="admonitionContent_S0QG"><p>For this tutorial we have been using <code>p2panda-js</code> which is a fairly <em>low-level</em> API. In the future we want to offer more <em>high-level</em> frameworks like <a href="https://github.com/p2panda/shirokuma" target="_blank" rel="noopener noreferrer"><code>shirokuma</code></a> which will take care of even more things for us, like internally handling the GraphQL queries, caching arguments to create entries and persisting key pairs automatically for us.</p></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-do-i-need" class="table-of-contents__link toc-highlight">What do I need?</a></li><li><a href="#start-node" class="table-of-contents__link toc-highlight">Start node</a></li><li><a href="#download-the-application-code" class="table-of-contents__link toc-highlight">Download the application code</a></li><li><a href="#create-a-schema" class="table-of-contents__link toc-highlight">Create a schema</a><ul><li><a href="#mushroom-schema" class="table-of-contents__link toc-highlight"><code>mushroom</code> Schema</a></li><li><a href="#mushroom_finding-schema" class="table-of-contents__link toc-highlight"><code>mushroom_finding</code> Schema</a></li><li><a href="#register-schemas" class="table-of-contents__link toc-highlight">Register schemas</a></li></ul></li><li><a href="#build-the-application" class="table-of-contents__link toc-highlight">Build the application</a><ul><li><a href="#initialise-webassembly" class="table-of-contents__link toc-highlight">Initialise WebAssembly</a></li><li><a href="#generate-key-pair" class="table-of-contents__link toc-highlight">Generate key pair</a></li><li><a href="#create-operations-and-entries" class="table-of-contents__link toc-highlight">Create operations and entries</a></li><li><a href="#publish-data" class="table-of-contents__link toc-highlight">Publish data</a></li><li><a href="#query-documents" class="table-of-contents__link toc-highlight">Query documents</a></li></ul></li><li><a href="#run-the-application" class="table-of-contents__link toc-highlight">Run the application</a></li></ul></div></div></div></div></main></div></div><footer class="footer_J6tW"><img class="footer-img__0Xc" src="/images/deepsea-panda.svg" width="100"><div><img class="supporters-img_P2oV" src="/images/nlnet-logo.svg" width="140"><img class="supporters-img_P2oV" src="/images/ngi-logo.png" width="200"><img class="supporters-img_P2oV" src="/images/eu-flag-logo.png" width="78"><p class="footer-text_MXRq">This project has received funding from the European Union‚Äôs Horizon 2020 research and innovation programme within the framework of the NGI-POINTER Project funded under grant agreement No 871528</p></div><p class="footer-text_MXRq">CC BY-SA 4.0<!-- --> - <a href="mailto:contributors@p2panda.org">Contact</a></p></footer></div>
<script src="/assets/js/runtime~main.86ed3d3b.js"></script>
<script src="/assets/js/main.125a03bc.js"></script>
</body>
</html>